<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>string.html</title>
    <script>
        //JS String Methods 중 알아야하는 것들

        //문자열 생성
        var str = `Lorem ipsum dolor sit amet dolor consectetur adipisicing elit.`;

        //string 타입 str의 길이 :  length 속성 str.length;

        console.log(str.length);
        var newStr = str.slice();

        console.log(newStr);
        //(0, 5); //인덱스 값의 범위  0 ~ 5까지의 값(5 제외)
        //(-10, -5);  인덱스 값의 범위 뒤에서부터 : cing elit.
        //(5,-10); ipsum dolor sit, amet consectetur adipisi
        //newStr = str.substring(3, 5); //3~5까지를 잘라옴

        newStr = str.replace('Lorem', '로렘').replace('.', ''); // Lorem ->  로렘 . -> 없애

        //정규표현식
        //var reg = / /; new RegExp();  
        //replace(/lorem/i,'로렘') i : 대소문자 구분 없이
        //replace(/lorem/ig,'로렘') i : 대소문자 구분 없이 + g : 해당 전체요소 다 바꿈


        // toUpperCase()
        // toLowerCase()
        // concat("사이에 추가 ", 연결하고자 하는 값, "뒤에 추가하고 싶은") :  연결
        // trim() : 해당되는 영역 잘라버리기
        // Padding(n,) : 영역을 정하고 그 영역에 원하는 거채워넣는 것 //ECMAScript 2017버전에서 사용 학원서 쓰는 건 2015버전
        //

        newStr = str.charAt(10); //10번째 위치한 값을 읽어 내겠다 : m
        newStr = str.charCodeAt(10); // (10번째 위치한 값) : m에 대한 아스키 코드
        newStr = str[10]; // == str.charAt(10); : 인덱스 값으로도 불러 올 수 있음

        // split 문자열을 배열타입으로




        console.log(newStr);


        //문제 주민번호

        var person_no = [
            '950403-1234567', //남
            '950403 2234567', //여
            '010403/3234567', //남
            '2104034234567', //여
            '950403*1234567'
        ]; // 2021 1921




        var gen = check_gender('950403-1234567');
        console.log(gen); // 남자입니다 여자입니다


        //console.log('22' > 20); // True 값

        function check_gender(birth) {
            // 들어온 정보를 읽어서 남자입니다/여자입니다 출력2000년 이전 1,2 이후 3,4 

            //2000년 이전 출생, 이후 출생 인지 체크 후
            //주민번호 뒷자리 첫번째 값을 확인해서 1,3 이면 남자, 2,4 이면 여자

            // 특수문자가 어떤게 들어올지 모르겠다
            //var spec = ['*', '/', '-'];
            // for (var str of spec) { //특수문자 거르기
            //     no = no.replace(str, '');
            // }

            var yy = birth.substring(0, 2);
            var over2000 = yy > 21 ? false : true; //21보다 크면 false 로 보겠다 90년대생이구나  if else 말고 삼항연산자
            
            var gen = birth.slice(-7, -6);
            var gender = ''; //밑에 경우가 없으면 값이 없어서 false -> 잘못된 번호입니다.
            if (over2000 && gen == '3')
                gender = '남자';
            else if (over2000 && gen == '4')
                gender = '여자';
            else if (!over2000 && gen == '1')
                gender = '남자';
            else if (!over2000 && gen == '2')
                gender = '여자';

            // var bir = no.slice(-7);
            // var person1 = no.charAt(6); // 6
            // var person2 = no.charAt(7);
            // if(person1 == 1,3 && person2 == 1,3) {

            // } else {

            // }

            return gender || '잘못된번호입니다';

        }

        //이런 오류들 때문에 맞게 풀고 있거나 구조를 생각해도 틀렸다고 받아들여서 막히는거임 
        //이거 때매 계속 오류 뜨고 있었음 ssibal -- check_gender();
    </script>
</head>

<body>
    주민번호 : <input type="text" id="jumin"><br>
    남 : <input type="radio" name="gender" value='남자'>
    여 : <input type="radio" name="gender" value='여자'>
    잘못된번호 : <input type="radio" name="gender">

    <script>
        var spec = ['*', '/', '-', '$', ' ']; //걸러 낼 것들 정규표현식 쓰면 훨씬 좋음 따로 공부
        document.getElementById('jumin').addEventListener('change', function () {
            console.log(this.value); //이벤트를 받는 자신을 가리키고 있음
            var birth = this.value;
            for (var str of spec) {
                birth = birth.replace(str, '');
            }
            if (birth.length != 13) { // 13개가 아니면 false
                console.log('잘못된 값');
                return;
            }
            var gen = check_gender(birth);
            var genders = document.querySelectorAll('input[name="gender"]'); //name="gender"
            genders.check_gender = true; // 체크박스에 체크가 됨
            
            
            if (gen == '남자')
                genders[0].checked = true;
            else if (gen == '여자')
                genders[1].checked = true;
            else
                genders[2].checked = true;

             console.log(gen);

        }); //위 input 태그에 이벤트 넣는거임
    </script>

</body>

</html>